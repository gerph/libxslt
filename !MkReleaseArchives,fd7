|
| Do the final stage of the build - that archives

| Copy the help file
Copy <ThisOriginal>.doc.xsltproc/html @.xsltproc/html ~C~VF~D

| Generate the Help files for XML catalog and XML lint
Echo [Generate help files]
Dir XML
| [long alias to extract the version number from the command]
Set Alias$GetVersion perl ^.!~GetVersion/pl %%0 %%1 %%*2
| [long alias to convert unix-style help to RISC OS help]
Set Alias$GetHelp perl ^.!~GetHelp/pl %%*0
GetVersion xmlCatalog        XMLCatalog > Help.xmlCatalog
GetVersion xmlLint*--version XMLLint    > Help.xmlLint
GetHelp    xmlCatalog >> Help.xmlCatalog
GetHelp    xmlLint    >> Help.xmlLint
GetVersion xsltProc*--version XSLTProc > Help.xsltProc
GetHelp    xsltProc                    >> Help.xsltProc
If "<XSLTProc$FileVersion>" = "" Then Error *** Failed to generate version number ?
| And back up
Dir ^

| Now archive the source
echo [Archive]
remove src-riscos-<LibraryName>-<ThisVersion>/zip
Zip -9r src-riscos-<LibraryName>-<ThisVersion>/zip Src diffs original.COPYING

| And the binaries
remove xsltproc-<XSLTProc$FileVersion>/zip
Zip -9r xsltproc-<XSLTProc$FileVersion>/zip XML.xsltProc XML.Help.xsltProc xsltproc/html original.COPYING

| Remove the temporary html file
| remove xmltools/html

| Remove the temporary html file
remove xmltools/html
